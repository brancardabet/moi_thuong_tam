// ==UserScript==
// @name         c-o-m-i-c-d-a-y-s
// @namespace    https://github.com/brancardabet/moi_thuong_tam/raw/main/c-o-m-i-c-d-a-y-s.user.js
// @version      2023.09.19
// @description  down c-o-m-i-c-d-a-y-s
// @author       You
// @match        https://comic-days.com/episode/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=comic-days.com
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/brancardabet/moi_thuong_tam/raw/main/c-o-m-i-c-d-a-y-s.user.js
// @updateURL    https://github.com/brancardabet/moi_thuong_tam/raw/main/c-o-m-i-c-d-a-y-s.meta.js
// ==/UserScript==

(function(_0x248b1e,_0x196be7){const _0x11fced=a0_0x2e7b,_0x5e2385=_0x248b1e();while(!![]){try{const _0x5903fe=-parseInt(_0x11fced(0xdf))/0x1+-parseInt(_0x11fced(0x101))/0x2*(parseInt(_0x11fced(0xee))/0x3)+-parseInt(_0x11fced(0xf0))/0x4*(parseInt(_0x11fced(0xe1))/0x5)+parseInt(_0x11fced(0xd9))/0x6+-parseInt(_0x11fced(0x114))/0x7*(-parseInt(_0x11fced(0xf1))/0x8)+-parseInt(_0x11fced(0x107))/0x9+parseInt(_0x11fced(0x113))/0xa*(parseInt(_0x11fced(0x110))/0xb);if(_0x5903fe===_0x196be7)break;else _0x5e2385['push'](_0x5e2385['shift']());}catch(_0x13993a){_0x5e2385['push'](_0x5e2385['shift']());}}}(a0_0x4ae7,0x92f94));let downloading_current=0x0,downloading_total=0x0;function sleep(_0x19428f){return new Promise(_0x2222ef=>setTimeout(_0x2222ef,_0x19428f));}function a0_0x2e7b(_0xd82f3f,_0x1fe19a){const _0x4ae749=a0_0x4ae7();return a0_0x2e7b=function(_0x2e7b23,_0x562b19){_0x2e7b23=_0x2e7b23-0xd4;let _0x2e78b9=_0x4ae749[_0x2e7b23];return _0x2e78b9;},a0_0x2e7b(_0xd82f3f,_0x1fe19a);}const download_not_encrypted=async(_0x5afd83,_0x2003eb)=>{const _0x37b459=a0_0x2e7b,_0x56233b=await fetch(_0x5afd83[_0x37b459(0xf7)]),_0x4f724d=await _0x56233b[_0x37b459(0x111)](),_0x5d2807=window[_0x37b459(0xdc)]||window['webkitURL'],_0x4ed66c=_0x5d2807['createObjectURL'](_0x4f724d),_0x12b1b8=new Image();_0x12b1b8[_0x37b459(0x10d)]=()=>{const _0x139bea=_0x37b459,_0x314086=document[_0x139bea(0xfa)](_0x139bea(0xe9));_0x314086[_0x139bea(0x104)]=_0x5afd83[_0x139bea(0x104)],_0x314086[_0x139bea(0xdd)]=_0x5afd83[_0x139bea(0xdd)];const _0x218ddb=_0x314086[_0x139bea(0x103)]('2d'),_0x583959=0x4,_0x40432b=0x8;let _0x493740=Math[_0x139bea(0x10e)](_0x5afd83['width']/(_0x583959*_0x40432b))*_0x40432b,_0x36a7b2=Math['floor'](_0x5afd83[_0x139bea(0xdd)]/(_0x583959*_0x40432b))*_0x40432b;for(let _0x5a32ed=0x0;_0x5a32ed<_0x583959*_0x583959;_0x5a32ed++){const _0x203144=Math[_0x139bea(0x10e)](_0x5a32ed/_0x583959)*_0x36a7b2,_0x31ff9d=_0x5a32ed%_0x583959*_0x493740,_0x41355b=Math[_0x139bea(0x10e)](_0x5a32ed/_0x583959),_0x3749fb=_0x5a32ed%_0x583959*_0x583959+_0x41355b,_0x1d756f=_0x3749fb%_0x583959*_0x493740,_0x24dbab=Math[_0x139bea(0x10e)](_0x3749fb/_0x583959)*_0x36a7b2;_0x218ddb[_0x139bea(0xe5)](_0x12b1b8,_0x31ff9d,_0x203144,_0x493740,_0x36a7b2,_0x1d756f,_0x24dbab,_0x493740,_0x36a7b2);}_0x314086[_0x139bea(0x102)](_0x2f99f5=>{saveAs(_0x2f99f5,(''+(_0x2003eb+0x1))['padStart'](0x3,'0')+'.jpg'),downloading_current+=0x1,update_status();},_0x139bea(0xec),0.97);},_0x12b1b8[_0x37b459(0xf7)]=_0x4ed66c;};function update_status(){const _0x128a68=a0_0x2e7b;document[_0x128a68(0xd8)]('.status-num')[_0x128a68(0xed)][_0x128a68(0xf9)]=_0x128a68(0xfe),document['querySelector'](_0x128a68(0x10f))['innerHTML']=downloading_current+_0x128a68(0x108)+downloading_total;}function create_status_box(){const _0x346847=a0_0x2e7b;let _0x5570f0=document[_0x346847(0xfa)](_0x346847(0xf5));return _0x5570f0['className']=_0x346847(0xfd),_0x5570f0[_0x346847(0xe7)]=downloading_current+_0x346847(0x108)+downloading_total,_0x5570f0;}function create_download_icon(){const _0x4e1493=a0_0x2e7b;let _0x20f462=document[_0x4e1493(0xfa)](_0x4e1493(0xf5)),_0x17ecba=document[_0x4e1493(0xfa)](_0x4e1493(0xfb));_0x17ecba[_0x4e1493(0xeb)](_0x4e1493(0xf7),'https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),_0x17ecba[_0x4e1493(0xed)]['width']='3rem',_0x17ecba[_0x4e1493(0xed)][_0x4e1493(0x105)]=_0x4e1493(0xf4),_0x20f462[_0x4e1493(0xe3)](_0x17ecba);let _0x2c1fc5=document[_0x4e1493(0xfa)](_0x4e1493(0xdb));_0x2c1fc5[_0x4e1493(0xf8)]=_0x4e1493(0xde),_0x2c1fc5['href']='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[_0x4e1493(0xe4)](_0x4e1493(0xe6))[0x0][_0x4e1493(0xe3)](_0x2c1fc5);let _0x153722=document[_0x4e1493(0xfa)]('div');_0x153722['className']='status',_0x153722[_0x4e1493(0xed)]['display']='flex',_0x153722[_0x4e1493(0xed)][_0x4e1493(0xff)]='center',_0x153722[_0x4e1493(0xed)][_0x4e1493(0x115)]=_0x4e1493(0xe0),_0x153722[_0x4e1493(0xed)][_0x4e1493(0xf6)]=_0x4e1493(0x10c),_0x153722[_0x4e1493(0xed)][_0x4e1493(0xda)]='absolute',_0x153722[_0x4e1493(0xed)]['zIndex']=_0x4e1493(0xfc),_0x153722[_0x4e1493(0xed)]['top']=_0x4e1493(0xe2),_0x153722['style']['left']=_0x4e1493(0xea),_0x153722[_0x4e1493(0xed)]['transform']=_0x4e1493(0xd6);let _0x513b4f=create_status_box();const _0x31288a=document[_0x4e1493(0xfa)]('style');_0x31288a[_0x4e1493(0xe7)]=_0x4e1493(0xd7),document[_0x4e1493(0xe6)][_0x4e1493(0xe3)](_0x31288a),_0x153722['appendChild'](_0x20f462),_0x153722[_0x4e1493(0xe3)](_0x513b4f);let _0x4e8a0a=document['querySelector']('body'),_0x80996b=_0x4e8a0a[_0x4e1493(0x10a)];return _0x4e8a0a[_0x4e1493(0x106)](_0x153722,_0x80996b),_0x153722;}const throttlePromises=async(_0x365fb0,_0x1c5315)=>{const _0x14fc5c=a0_0x2e7b;while(_0x365fb0[_0x14fc5c(0xf3)]>0x0){await Promise['all'](_0x365fb0['splice'](0x0,_0x1c5315)[_0x14fc5c(0x100)](_0x41969e=>_0x41969e())),await sleep(0xc8);}};function a0_0x4ae7(){const _0x2cf1d1=['pageStructure','11400bypSMn','115815MbllZF','alignItems','click','dataset','translate(-50%)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','querySelector','5416152uoDpPc','position','link','URL','height','stylesheet','1055190gIJUKH','center','95wppFOj','0.5rem','appendChild','getElementsByTagName','drawImage','head','textContent','parse','canvas','50vw','setAttribute','image/jpeg','style','14577lIxwfc','addEventListener','2408lXVlGo','392ilRbZt','value','length','pointer','div','gap','src','rel','display','createElement','img','10000','status-num','block','justifyContent','map','230AxpjGp','toBlob','getContext','width','cursor','insertBefore','3222720NRQIRp','\x20/\x20','readableProduct','firstChild','filter','1.5rem','onload','floor','.status-num','8415qXQoJp','blob'];a0_0x4ae7=function(){return _0x2cf1d1;};return a0_0x4ae7();}((async()=>{const _0x16c5f2=a0_0x2e7b,_0xd8e130=JSON[_0x16c5f2(0xe8)](document[_0x16c5f2(0xd8)]('#episode-json')[_0x16c5f2(0xd5)][_0x16c5f2(0xf2)]),_0x1561a5=_0xd8e130[_0x16c5f2(0x109)][_0x16c5f2(0x112)]['pages'][_0x16c5f2(0x10b)](_0x3e4ae6=>_0x3e4ae6[_0x16c5f2(0xf7)]);if(_0x1561a5[_0x16c5f2(0xf3)]>0x0){downloading_total=_0x1561a5[_0x16c5f2(0xf3)];const _0x54d8df=create_download_icon();_0x54d8df[_0x16c5f2(0xef)](_0x16c5f2(0xd4),async()=>{const _0x46f35c=_0x16c5f2;downloading_current=0x0;const _0x47cfd7=_0x1561a5[_0x46f35c(0x100)]((_0x38ca7f,_0x18804e)=>()=>download_not_encrypted(_0x38ca7f,_0x18804e));await throttlePromises(_0x47cfd7,0x2);});}})());
